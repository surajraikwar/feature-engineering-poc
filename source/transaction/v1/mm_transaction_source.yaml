- name: mm_transaction_source
  description: Source for Money Movement transaction data
  version: v1.0.0
  type: databricks
  entity: transaction
  location: jupiter.mm.fact_mm_transaction
  fields:
    - name: transaction_id
      type: string
      description: Unique identifier for the transaction
      required: true
    - name: user_id
      type: string
      description: ID of the user who made the transaction
      required: true
    - name: merchant_id
      type: string
      description: ID of the merchant where the transaction occurred
      required: true
    - name: amount
      type: float
      description: Transaction amount
      required: true
  config:
    catalog: jupiter
    schema: mm
    table: fact_mm_transaction
    incremental: true
    schedule: "0 0 * * *"  # Daily at midnight
    quality_checks:
      - type: not_null
        field: transaction_id
        condition: "transaction_id IS NOT NULL"
      - type: unique
        field: transaction_id
        condition: "COUNT(DISTINCT transaction_id) = COUNT(*)"
  created_at: "2025-05-27T00:00:00Z"
  created_by: system
  updated_at: "2025-05-27T00:00:00Z"